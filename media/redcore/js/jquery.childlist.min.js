(function(e,c,a,g){var d="childlist";var f={parentSelector:".js-childlist-parent",parentVarName:null,parentOnChange:true,childSelector:".js-childlist-child",ajaxUrl:null};function b(i,h){this.element=i;this.options=e.extend({},f,h);this._defaults=f;this.childField=e(this.element);this.parentField=e(this.options.parentSelector);this.parentValue=this.getFieldValue(this.parentField);this.childValue=this.getFieldValue(this.element);this._name=d;this.init()}b.prototype={init:function(){var h=this;h.parentField.change(function(i){h.updateChild()});h.updateChild()},getFieldValue:function(h){var j=null;if(e(h).is("select")){var i=e(h).find("option:selected");j=i.val()}else{j=e(h).val()}return j},isFieldActive:function(i){var h=this;var j=h.getFieldValue(i);return option.val()!=""},updateChild:function(){var h=this;h.parentValue=h.getFieldValue(h.parentField);e.ajax({url:h.options.ajaxUrl,type:"POST",dataType:"json",cache:false,data:h.options.parentVarName+"="+h.parentValue,success:function(j){var i="";if(j!==null){j.each(function(k){i+='<option value="'+k.value+'"';if(k.value===h.childValue){i+=' selected="selected"'}i+=" >"+k.text+"</option>"})}h.childField.empty().append(i);h.childField.trigger("liszt:updated")}})},resetField:function(h){e(h).val("");e(h).trigger("liszt:updated")},submitForm:function(){this.theForm.submit()}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);