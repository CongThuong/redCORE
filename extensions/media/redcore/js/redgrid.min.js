(function(e,c,a,g){var d="redgrid";var f={ajaxRefreshUrl:"",formSelector:"#adminForm",orderColSelector:".js-order-col",orderDirSelector:".js-order-dir",orderFieldSelector:".js-order-field",directionFieldSelector:".js-direction-field",ordering:"",direction:"ASC"};function b(i,h){this.element=i;this.options=e.extend({},f,h);this._defaults=f;this.theForm=this.element;this.orderCols=e(this.options.orderColSelector);this.orderDir=e(this.options.orderDirSelector);this.orderField=e(this.options.orderFieldSelector);this.directionField=e(this.options.directionFieldSelector);this.ordering=this.options.ordering;this.direction=this.options.direction;this._name=d;this.init()}b.prototype={init:function(){var h=this;this.createOrderingField();this.createDirectionField();this.orderCols.click(function(){var i=e(this).attr("data-order");var j="ASC";if(i.length){if(i!==h.orderCol){h.updateFieldValue(h.orderField,i);h.updateFieldValue(h.directionField,"ASC")}else{h.toggleDirection()}h.theForm.submit()}})},toggleDirection:function(){var h="ASC";if(this.direction.toUpperCase()=="ASC"){h="DESC"}this.updateFieldValue(this.directionField,h)},createOrderingField:function(){var h=this;if(!this.orderField.length){this.orderField=e("<input>").attr({type:"hidden",id:"js-order-field","class":"js-order-field",name:"filter_order",value:this.ordering});this.orderField.appendTo(this.theForm)}if(this.orderField.is("select")){this.orderCols.each(function(){var k=e(this).attr("data-order");var i=e(this).attr("data-name");if(k.length){var j=h.findOption(h.orderField,k);if(!j.length){var j=e("<option>");j.text(i).val(k);if(e(this).hasClass("active")){j.attr("selected","selected")}h.orderField.append(j)}}});this.orderField.trigger("liszt:updated")}this.orderCol=this.orderField.val()},createDirectionField:function(){if(!this.directionField.length){this.directionField=e("<input>").attr({type:"hidden",id:"js-direction-field","class":"js-direction-field",name:"filter_order_Dir",value:this.direction});this.directionField.appendTo(this.theForm)}this.direction=this.directionField.val()},updateFieldValue:function(l,k){var j=l.attr("type");if(j==="hidden"||j==="text"){l.attr("value",k)}else{if(l.is("select")){var h=l.find("option").filter(function(){return e(this).val()==k});if(h.length){h.attr("selected","selected")}else{var i=e("<option>");i.text(k).val(k);i.attr("selected","selected");l.append(i)}l.trigger("liszt:updated")}}},findOption:function(h,i){return h.find("option").filter(function(){return e(this).val()==i})}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);