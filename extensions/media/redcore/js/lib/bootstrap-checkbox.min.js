!function(a){var b=function(d,c,f){if(f){f.stopPropagation();f.preventDefault()}this.$element=a(d);this.$newElement=null;this.button=null;this.label=null;this.labelPrepend=null;this.options=a.extend({},a.fn.checkbox.defaults,this.$element.data(),typeof c=="object"&&c);this.displayAsButton=this.options.displayAsButton;this.buttonStyle=this.options.buttonStyle;this.buttonStyleChecked=this.options.buttonStyleChecked;this.defaultState=this.options.defaultState;this.defaultEnabled=this.options.defaultEnabled;this.indeterminate=this.options.indeterminate;this.init()};b.prototype={constructor:b,init:function(f){this.$element.hide();this.$element.attr("autocomplete","off");var g=this.$element.attr("class")!==undefined?this.$element.attr("class").split(/\s+/):"";var d=this.getTemplate();this.$element.after(d);this.$newElement=this.$element.next(".bootstrap-checkbox");this.button=this.$newElement.find("button");this.label=this.$newElement.find("span.label-checkbox");this.labelPrepend=this.$newElement.find("span.label-prepend-checkbox");for(var c=0;c<g.length;c++){if(g[c]!="checkbox"){this.$newElement.addClass(g[c])}}this.button.addClass(this.buttonStyle);if(this.$element.data("default-state")!=undefined){this.defaultState=this.$element.data("default-state")}if(this.$element.data("default-enabled")!=undefined){this.defaultEnabled=this.$element.data("default-enabled")}if(this.$element.data("display-as-button")!=undefined){this.displayAsButton=this.$element.data("display-as-button")}if(this.$element.data("indeterminate")!=undefined){this.indeterminate=this.$element.data("indeterminate")}if(this.indeterminate){this.$element.prop("indeterminate",true)}this.checkEnabled();this.checkChecked();this.checkTabIndex();this.clickListener()},getTemplate:function(){var e=this.displayAsButton?" displayAsButton":"",d=this.$element.data("label")?'<span class="label-checkbox">'+this.$element.data("label")+"</span>":"",c=this.$element.data("label-prepend")?'<span class="label-prepend-checkbox">'+this.$element.data("label-prepend")+"</span>":"";var f='<span class="button-checkbox bootstrap-checkbox"><button type="button" class="btn clearfix'+e+'">'+((this.$element.data("label-prepend")&&this.displayAsButton)?c:"")+'<span class="icon '+this.options.checkedClass+'" style="display:none;"></span><span class="icon '+this.options.uncheckedClass+'"></span><span class="icon '+this.options.indeterminateClass+'" style="display:none;"></span>'+((this.$element.data("label")&&this.displayAsButton)?d:"")+"</button></span>";if(!this.displayAsButton&&(this.$element.data("label")||this.$element.data("label-prepend"))){f='<label class="checkbox bootstrap-checkbox">'+c+f+d+"</label>"}return f},checkEnabled:function(){this.button.attr("disabled",this.$element.is(":disabled"));this.$newElement.toggleClass("disabled",this.$element.is(":disabled"))},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var c=this.$element.attr("tabindex");this.button.attr("tabindex",c)}},checkChecked:function(){var d=/\s/g,c=".";if(this.$element.prop("indeterminate")==true){this.button.find("span."+this.options.checkedClass.replace(d,c)).hide();this.button.find("span."+this.options.uncheckedClass.replace(d,c)).hide();this.button.find("span."+this.options.indeterminateClass.replace(d,c)).show()}else{if(this.$element.is(":checked")){this.button.find("span."+this.options.checkedClass.replace(d,c)).show();this.button.find("span."+this.options.uncheckedClass.replace(d,c)).hide()}else{this.button.find("span."+this.options.checkedClass.replace(d,c)).hide();this.button.find("span."+this.options.uncheckedClass.replace(d,c)).show()}this.button.find("span."+this.options.indeterminateClass.replace(d,c)).hide()}if(this.$element.is(":checked")){if(this.buttonStyleChecked){this.button.removeClass(this.buttonStyle);this.button.addClass(this.buttonStyleChecked)}}else{if(this.buttonStyleChecked){this.button.removeClass(this.buttonStyleChecked);this.button.addClass(this.buttonStyle)}}},clickListener:function(){var c=this;this.button.on("click",function(d){d.preventDefault();c.$element.prop("indeterminate",false);c.$element[0].click();c.checkChecked()});this.$element.on("change",function(d){c.checkChecked()});this.$element.parents("form").on("reset",function(d){if(c.defaultState==null){c.$element.prop("indeterminate",true)}else{c.$element.prop("checked",c.defaultState)}c.$element.prop("disabled",!c.defaultEnabled);c.checkEnabled();c.checkChecked();d.preventDefault()})},setOptions:function(c,d){if(c.checked!=undefined){this.setChecked(c.checked)}if(c.enabled!=undefined){this.setEnabled(c.enabled)}if(c.indeterminate!=undefined){this.setIndeterminate(c.indeterminate)}},setChecked:function(c){this.$element.prop("checked",c);this.$element.prop("indeterminate",false);this.checkChecked()},setIndeterminate:function(c){this.$element.prop("indeterminate",c);this.checkChecked()},click:function(c){this.$element.prop("indeterminate",false);this.$element[0].click();this.checkChecked()},change:function(c){this.$element.change()},setEnabled:function(c){this.$element.attr("disabled",!c);this.checkEnabled()},toggleEnabled:function(c){this.$element.attr("disabled",!this.$element.is(":disabled"));this.checkEnabled()}};a.fn.checkbox=function(c,d){return this.each(function(){var g=a(this),f=g.data("checkbox"),e=typeof c=="object"&&c;if(!f){g.data("checkbox",(f=new b(this,e,d)));if(f.options.constructorCallback!=undefined){f.options.constructorCallback(f.$element,f.button,f.label,f.labelPrepend)}}else{if(typeof c=="string"){f[c](d)}else{f.setOptions(c,d)}}})};a.fn.checkbox.defaults={displayAsButton:false,indeterminate:false,buttonStyle:"btn-link",buttonStyleChecked:null,checkedClass:"cb-icon-check",uncheckedClass:"cb-icon-check-empty",indeterminateClass:"cb-icon-check-indeterminate",defaultState:false,defaultEnabled:true,constructorCallback:null}}(window.jQuery);